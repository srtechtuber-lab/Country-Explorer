<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Country Explorer üåç | Discover the World</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #4361ee;
            --secondary-color: #3a0ca3;
            --accent-color: #4cc9f0;
            --dark-color: #1a1a2e;
            --light-color: #f8f9fa;
            --success-color: #06d6a0;
            --danger-color: #ef476f;
            --card-bg: rgba(255, 255, 255, 0.92);
            --transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.1);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: var(--light-color);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        .bg-image {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.25;
            z-index: -1;
            transition: var(--transition);
            filter: blur(5px);
        }

        .bg-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(26, 26, 46, 0.9), rgba(22, 33, 62, 0.8));
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        header {
            text-align: center;
            padding: 30px 0;
            animation: fadeInDown 1s ease-out;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .logo i {
            font-size: 2.8rem;
            color: var(--accent-color);
            filter: drop-shadow(0 0 10px rgba(76, 201, 240, 0.5));
        }

        h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 3.2rem;
            font-weight: 900;
            background: linear-gradient(to right, #4cc9f0, #4361ee);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .tagline {
            font-size: 1.2rem;
            color: #b8c1ec;
            max-width: 600px;
            margin: 0 auto;
        }

        .search-section {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            margin: 30px auto;
            max-width: 800px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: fadeInUp 1s ease-out 0.3s both;
        }

        .search-container {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .search-box {
            flex: 1;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 18px 25px;
            padding-left: 55px;
            font-size: 1.1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            color: white;
            transition: var(--transition);
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(76, 201, 240, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }

        .search-box i {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--accent-color);
            font-size: 1.3rem;
        }

        .search-btn {
            padding: 0 30px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.4);
        }

        .search-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(67, 97, 238, 0.6);
        }

        .search-btn:active {
            transform: translateY(0);
        }

        .hint {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #b8c1ec;
            font-size: 0.9rem;
        }

        .hint i {
            color: var(--accent-color);
        }

        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }

        .country-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            color: var(--dark-color);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            animation: fadeInLeft 1s ease-out 0.5s both;
            transition: var(--transition);
        }

        .country-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(67, 97, 238, 0.1);
        }

        .country-flag {
            width: 80px;
            height: 50px;
            object-fit: cover;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border: 2px solid white;
        }

        .country-name {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 5px;
        }

        .country-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .detail-item {
            background: rgba(67, 97, 238, 0.05);
            padding: 15px;
            border-radius: 12px;
            transition: var(--transition);
        }

        .detail-item:hover {
            background: rgba(67, 97, 238, 0.1);
            transform: translateY(-3px);
        }

        .detail-label {
            font-size: 0.9rem;
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .detail-value {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--dark-color);
        }

        .population {
            color: var(--secondary-color);
        }

        .capital {
            color: var(--accent-color);
        }

        .region {
            color: #06d6a0;
        }

        .currency {
            color: #7209b7;
        }

        .map-container {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            color: var(--dark-color);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            animation: fadeInRight 1s ease-out 0.5s both;
            transition: var(--transition);
        }

        .map-container:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .map-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(67, 97, 238, 0.1);
        }

        .map-header h3 {
            font-size: 1.8rem;
            color: var(--dark-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .map-frame {
            width: 100%;
            height: 350px;
            border-radius: 15px;
            overflow: hidden;
            background: #f1f5f9;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .map-frame iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .map-placeholder {
            text-align: center;
            color: #64748b;
        }

        .map-placeholder i {
            font-size: 4rem;
            margin-bottom: 15px;
            color: var(--accent-color);
        }

        .theme-images {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 25px;
            justify-content: center;
        }

        .theme-image {
            width: 100px;
            height: 70px;
            border-radius: 10px;
            object-fit: cover;
            cursor: pointer;
            transition: var(--transition);
            opacity: 0.7;
            border: 2px solid transparent;
        }

        .theme-image:hover, .theme-image.active {
            opacity: 1;
            transform: scale(1.1);
            border-color: var(--accent-color);
        }

        .error-message {
            background: rgba(239, 71, 111, 0.1);
            border: 2px solid var(--danger-color);
            color: var(--danger-color);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-top: 30px;
            display: none;
            animation: shake 0.5s ease-in-out;
        }

        .error-message i {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 30px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-top: 5px solid var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            color: #b8c1ec;
            font-size: 0.9rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .featured-countries {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .featured-country {
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
        }

        .featured-country:hover {
            background: rgba(76, 201, 240, 0.3);
            transform: translateY(-3px);
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInLeft {
            from { opacity: 0; transform: translateX(-30px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes fadeInRight {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2.5rem;
            }
        }

        @media (max-width: 768px) {
            .search-container {
                flex-direction: column;
            }
            
            .search-btn {
                padding: 18px;
                justify-content: center;
            }
            
            .country-details {
                grid-template-columns: 1fr;
            }
            
            .country-name {
                font-size: 1.8rem;
            }
            
            .theme-images {
                justify-content: center;
            }
            
            .theme-image {
                width: 80px;
                height: 60px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .search-section {
                padding: 20px;
            }
            
            .country-card, .map-container {
                padding: 20px;
            }
            
            .theme-image {
                width: 70px;
                height: 50px;
            }
        }

        /* Floating animation for logo */
        .floating {
            animation: floating 3s ease-in-out infinite;
        }

        @keyframes floating {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .image-counter {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
        }
    </style>
</head>
<body>
    <!-- Dynamic Background Image -->
    <div class="bg-image" id="bgImage"></div>
    <div class="bg-overlay"></div>

    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-globe-americas floating"></i>
                <h1>Country Explorer</h1>
            </div>
            <p class="tagline">Discover fascinating details about countries around the world. Search for any country and explore its culture, geography, and more.</p>
        </header>

        <section class="search-section">
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Enter country name (e.g., France, Japan, Brazil)">
                </div>
                <button class="search-btn" id="searchBtn">
                    <i class="fas fa-search-location"></i> Search Country
                </button>
            </div>
            <div class="hint">
                <i class="fas fa-lightbulb"></i>
                <span>Try searching for countries like USA, India, Australia, or any country you're curious about!</span>
            </div>
            
            <div class="featured-countries">
                <div class="featured-country" data-country="United States">üá∫üá∏ USA</div>
                <div class="featured-country" data-country="France">üá´üá∑ France</div>
                <div class="featured-country" data-country="Japan">üáØüáµ Japan</div>
                <div class="featured-country" data-country="Brazil">üáßüá∑ Brazil</div>
                <div class="featured-country" data-country="Australia">üá¶üá∫ Australia</div>
                <div class="featured-country" data-country="Egypt">üá™üá¨ Egypt</div>
            </div>
        </section>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Exploring the world... Gathering country details</p>
        </div>

        <div class="error-message" id="errorMessage">
            <i class="fas fa-exclamation-triangle"></i>
            <h3>Country Not Found</h3>
            <p>We couldn't find the country you're looking for. Please check the spelling and try again.</p>
        </div>

        <div class="content-wrapper">
            <div class="country-card">
                <div class="card-header">
                    <div>
                        <h2 class="country-name" id="countryName">Search for a Country</h2>
                        <p id="countryNativeName">Enter a country name to see details here</p>
                    </div>
                    <img src="" alt="Country Flag" class="country-flag" id="countryFlag">
                </div>
                
                <div class="country-details">
                    <div class="detail-item">
                        <div class="detail-label"><i class="fas fa-users"></i> Population</div>
                        <div class="detail-value population" id="population">-</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label"><i class="fas fa-landmark"></i> Capital</div>
                        <div class="detail-value capital" id="capital">-</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label"><i class="fas fa-globe-asia"></i> Region</div>
                        <div class="detail-value region" id="region">-</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label"><i class="fas fa-money-bill-wave"></i> Currency</div>
                        <div class="detail-value currency" id="currency">-</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label"><i class="fas fa-language"></i> Language</div>
                        <div class="detail-value" id="language">-</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label"><i class="fas fa-map-marker-alt"></i> Area</div>
                        <div class="detail-value" id="area">- km¬≤</div>
                    </div>
                </div>
            </div>

            <div class="map-container">
                <div class="map-header">
                    <h3><i class="fas fa-map-marked-alt"></i> Country Map</h3>
                    <div id="coordinates">Coordinates: -</div>
                </div>
                <div class="map-frame" id="mapFrame">
                    <div class="map-placeholder">
                        <i class="fas fa-map"></i>
                        <p>Search for a country to view its map</p>
                    </div>
                </div>
                
                <div class="theme-images" id="themeImages">
                    <!-- Theme images will be dynamically added here -->
                </div>
            </div>
        </div>

        <footer>
            <p>Country Explorer &copy; 2023 | Powered by REST Countries API | All country data is for educational purposes</p>
            <p><i class="fas fa-code"></i> Built with HTML, CSS & JavaScript</p>
        </footer>
    </div>

    <script>
        // DOM Elements
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const countryName = document.getElementById('countryName');
        const countryNativeName = document.getElementById('countryNativeName');
        const countryFlag = document.getElementById('countryFlag');
        const population = document.getElementById('population');
        const capital = document.getElementById('capital');
        const region = document.getElementById('region');
        const currency = document.getElementById('currency');
        const language = document.getElementById('language');
        const area = document.getElementById('area');
        const coordinates = document.getElementById('coordinates');
        const mapFrame = document.getElementById('mapFrame');
        const themeImages = document.getElementById('themeImages');
        const bgImage = document.getElementById('bgImage');
        const loading = document.getElementById('loading');
        const errorMessage = document.getElementById('errorMessage');
        const featuredCountries = document.querySelectorAll('.featured-country');

        // API Base URL
        const API_URL = 'https://restcountries.com/v3.1';

        // Multiple reliable image sources with fallbacks
        const IMAGE_SOURCES = [
            // Pixabay API (free, no key required for low res)
            (query) => `https://pixabay.com/api/?key=25540812-faf2b76d586c1787d2dd02736&q=${encodeURIComponent(query)}+landscape&image_type=photo&per_page=5`,
            
            // Pexels API (free with key)
            (query) => `https://api.pexels.com/v1/search?query=${encodeURIComponent(query)}+country&per_page=5`,
            
            // Placeholder sources (fallback)
            (query) => `https://source.unsplash.com/random/800x600/?${encodeURIComponent(query)},landscape`,
            (query) => `https://source.unsplash.com/random/800x600/?${encodeURIComponent(query)},city`,
            (query) => `https://source.unsplash.com/random/800x600/?${encodeURIComponent(query)},nature`
        ];

        // Pre-defined images for popular countries (fallback)
        const COUNTRY_IMAGES = {
            'United States': [
                'https://images.unsplash.com/photo-1501594907352-04cda38ebc29',
                'https://images.unsplash.com/photo-1519225421980-715cb0215aed',
                'https://images.unsplash.com/photo-1502602898657-3e91760cbb34'
            ],
            'France': [
                'https://images.unsplash.com/photo-1502602898657-3e91760cbb34',
                'https://images.unsplash.com/photo-1508050919630-b135583b29ab',
                'https://images.unsplash.com/photo-1511739001486-6bfe10ce785f'
            ],
            'Japan': [
                'https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e',
                'https://images.unsplash.com/photo-1545569341-9eb8b30979d9',
                'https://images.unsplash.com/photo-1528164344705-47542687000d'
            ],
            'Brazil': [
                'https://images.unsplash.com/photo-1483729558449-99ef09a8c325',
                'https://images.unsplash.com/photo-1548013146-72479768bada',
                'https://images.unsplash.com/photo-1516306580123-e6e52b1b7b5f'
            ],
            'Australia': [
                'https://images.unsplash.com/photo-1506973035872-a4ec16b8e8d9',
                'https://images.unsplash.com/photo-1523482580672-f109ba8cb9be',
                'https://images.unsplash.com/photo-1507413245164-6160d8298b31'
            ],
            'Egypt': [
                'https://images.unsplash.com/photo-1503177119275-0aa32b3a9368',
                'https://images.unsplash.com/photo-1511994717241-6c5b6c6b6c6b',
                'https://images.unsplash.com/photo-1539650116574-75c0c6d73d8a'
            ]
        };

        // Initialize with a default country
        window.addEventListener('DOMContentLoaded', () => {
            fetchCountryData('United States');
        });

        // Search button click event
        searchBtn.addEventListener('click', () => {
            const query = searchInput.value.trim();
            if (query) {
                fetchCountryData(query);
            }
        });

        // Enter key press in search input
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const query = searchInput.value.trim();
                if (query) {
                    fetchCountryData(query);
                }
            }
        });

        // Featured countries click events
        featuredCountries.forEach(country => {
            country.addEventListener('click', () => {
                const countryName = country.getAttribute('data-country');
                searchInput.value = countryName;
                fetchCountryData(countryName);
            });
        });

        // Fetch country data from API
        async function fetchCountryData(countryName) {
            // Show loading animation
            loading.style.display = 'block';
            errorMessage.style.display = 'none';
            
            try {
                const response = await fetch(`${API_URL}/name/${countryName}?fullText=true`);
                
                if (!response.ok) {
                    throw new Error('Country not found');
                }
                
                const data = await response.json();
                const country = data[0];
                
                // Update UI with country data
                updateCountryInfo(country);
                
                // Fetch and update background images
                await updateBackgroundImages(country);
                
                // Hide loading animation
                loading.style.display = 'none';
                
            } catch (error) {
                console.error('Error fetching country data:', error);
                loading.style.display = 'none';
                showError();
            }
        }

        // Update country information in the UI
        function updateCountryInfo(country) {
            // Update basic info
            countryName.textContent = country.name.common;
            countryNativeName.textContent = country.name.official;
            countryFlag.src = country.flags.png;
            countryFlag.alt = `Flag of ${country.name.common}`;
            
            // Update details
            population.textContent = formatNumber(country.population);
            capital.textContent = country.capital ? country.capital[0] : 'N/A';
            region.textContent = country.region;
            
            // Get currency
            if (country.currencies) {
                const currencyCode = Object.keys(country.currencies)[0];
                const currencyInfo = country.currencies[currencyCode];
                currency.textContent = `${currencyInfo.name} (${currencyCode})`;
            } else {
                currency.textContent = 'N/A';
            }
            
            // Get language
            if (country.languages) {
                const languages = Object.values(country.languages).join(', ');
                language.textContent = languages;
            } else {
                language.textContent = 'N/A';
            }
            
            // Update area
            area.textContent = `${formatNumber(country.area)} km¬≤`;
            
            // Update coordinates
            if (country.latlng) {
                coordinates.textContent = `Coordinates: ${country.latlng[0].toFixed(2)}¬∞, ${country.latlng[1].toFixed(2)}¬∞`;
                
                // Update map
                updateMap(country.latlng[0], country.latlng[1]);
            } else {
                coordinates.textContent = 'Coordinates: N/A';
                updateMap(null, null);
            }
            
            // Add animation to card
            document.querySelector('.country-card').style.animation = 'pulse 0.5s ease-out';
            setTimeout(() => {
                document.querySelector('.country-card').style.animation = '';
            }, 500);
        }

        // Update background images based on country
        async function updateBackgroundImages(country) {
            // Clear previous images
            themeImages.innerHTML = '';
            
            const countryQuery = country.name.common;
            let imageUrls = [];
            
            // Try to get images from predefined sources first
            if (COUNTRY_IMAGES[countryQuery]) {
                imageUrls = COUNTRY_IMAGES[countryQuery];
            } else {
                // Generate random images for other countries
                imageUrls = await generateRandomImages(countryQuery);
            }
            
            // Set main background image
            if (imageUrls.length > 0) {
                bgImage.style.backgroundImage = `url(${imageUrls[0]})`;
            }
            
            // Display theme images
            imageUrls.forEach((url, index) => {
                const imgContainer = document.createElement('div');
                imgContainer.style.position = 'relative';
                imgContainer.style.display = 'inline-block';
                
                const img = document.createElement('img');
                img.className = 'theme-image';
                img.src = url;
                img.alt = `${countryQuery} image ${index + 1}`;
                
                // Add counter
                const counter = document.createElement('div');
                counter.className = 'image-counter';
                counter.textContent = index + 1;
                
                imgContainer.appendChild(img);
                imgContainer.appendChild(counter);
                
                img.addEventListener('click', () => {
                    // Set clicked image as background
                    bgImage.style.backgroundImage = `url(${url})`;
                    
                    // Update active state
                    document.querySelectorAll('.theme-image').forEach(img => img.classList.remove('active'));
                    img.classList.add('active');
                });
                
                themeImages.appendChild(imgContainer);
                
                // Preload image
                preloadImage(url);
            });
            
            // Set first image as active
            const firstImage = themeImages.querySelector('.theme-image');
            if (firstImage) {
                firstImage.classList.add('active');
            }
        }

        // Generate random images for a country
        async function generateRandomImages(countryName) {
            const imageUrls = [];
            const queries = [
                `${countryName} landscape`,
                `${countryName} city`,
                `${countryName} culture`,
                `${countryName} tourism`,
                `${countryName} nature`
            ];
            
            // Use Unsplash as primary source
            for (let i = 0; i < 5; i++) {
                try {
                    // Randomize image dimensions for variety
                    const width = 800 + Math.floor(Math.random() * 400);
                    const height = 600 + Math.floor(Math.random() * 300);
                    
                    // Use different search terms
                    const query = queries[i % queries.length];
                    const imageUrl = `https://source.unsplash.com/random/${width}x${height}/?${encodeURIComponent(query)}&sig=${Math.random()}`;
                    
                    imageUrls.push(imageUrl);
                } catch (error) {
                    console.error('Error generating image:', error);
                }
            }
            
            return imageUrls;
        }

        // Preload image
        function preloadImage(url) {
            const img = new Image();
            img.src = url;
        }

        // Update map based on coordinates
        function updateMap(lat, lng) {
            if (lat && lng) {
                mapFrame.innerHTML = `
                    <iframe 
                        src="https://www.openstreetmap.org/export/embed.html?bbox=${lng-5}%2C${lat-5}%2C${lng+5}%2C${lat+5}&layer=mapnik&marker=${lat}%2C${lng}"
                        title="Country Map">
                    </iframe>
                `;
            } else {
                mapFrame.innerHTML = `
                    <div class="map-placeholder">
                        <i class="fas fa-map"></i>
                        <p>Map not available for this country</p>
                    </div>
                `;
            }
        }

        // Show error message
        function showError() {
            errorMessage.style.display = 'block';
            
            // Shake animation
            errorMessage.style.animation = 'shake 0.5s ease-in-out';
            setTimeout(() => {
                errorMessage.style.animation = '';
            }, 500);
        }

        // Format large numbers with commas
        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        // Add some interactivity to the search input
        searchInput.addEventListener('focus', () => {
            searchInput.parentElement.classList.add('focused');
        });

        searchInput.addEventListener('blur', () => {
            searchInput.parentElement.classList.remove('focused');
        });

        // Add floating animation to the logo on hover
        const logoIcon = document.querySelector('.logo i');
        logoIcon.addEventListener('mouseenter', () => {
            logoIcon.classList.add('floating');
        });

        // Auto-rotate background images every 10 seconds
        let currentImageIndex = 0;
        setInterval(() => {
            const images = document.querySelectorAll('.theme-image');
            if (images.length > 0) {
                currentImageIndex = (currentImageIndex + 1) % images.length;
                const nextImage = images[currentImageIndex];
                
                if (nextImage) {
                    // Update background
                    bgImage.style.backgroundImage = `url(${nextImage.src})`;
                    
                    // Update active state
                    images.forEach(img => img.classList.remove('active'));
                    nextImage.classList.add('active');
                }
            }
        }, 10000);
    </script>
</body>
</html>
